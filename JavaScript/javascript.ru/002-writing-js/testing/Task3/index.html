<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://js.cx/test/libs.js"></script>
    <script src="test.js"></script>
</head>
<body>
<a href="http://learn.javascript.ru/testing#%D1%87%D1%82%D0%BE-%D0%BD%D0%B5-%D1%82%D0%B0%D0%BA-%D0%B2-%D1%82%D0%B5%D1%81%D1%82%D0%B5">Что
    не так в тесте?</a>
<pre style="font-size: 10px">
/*
Что не так в этом тесте функции pow?
*/

it("Возводит x в степень n", function() {
  var x = 5;

  var result = x;
  assert.equal(pow(x, 1), result);

  result *= x;
  assert.equal(pow(x, 2), result);

  result *= x;
  assert.equal(pow(x, 3), result);
});
P.S. Синтаксически он верен и работает, но спроектирован неправильно.
</pre>
<div id="answer">
    <h2>Предполагаемый ответ (как оказалось, верный).</h2>
    <ul>
        <li>Тесты не разделены в отдельные вызовы it(...)</li>
        <li>Код подвержен ошибкам т.к. каждый следующий тест строится на баще предыдущего.</li>
        <li>Тут напрашивается генерация тестов в цикле, что не было реализовано.</li>
    </ul>
</div>
<script>
	function pow(x, n) {
		if (n < 0) {
			return NaN;
		} else if (n !== Math.floor(n)) {
			return NaN;
		} else if (x == 0 && n == 0) {
			return NaN;
		}

		var result = 1;
		for (var i = 0; i < n; i++) {
			result *= x;
		}
		return result;
	}
</script>
</body>
</html>